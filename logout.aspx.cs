using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;

public partial class logout : System.Web.UI.Page
{
    protected void Page_Load(object sender, System.EventArgs e)
    {
        // Put user code to initialize the page here
        if (Session["compcode"] != null)
        {
            saveLoginInfo(Session["compcode"].ToString(), Session["userid"].ToString(), "");
        }
        Session.Abandon();

        Session["compcode"] = null;
        Session["userid"] = null;
        Session["revenue"] = null;
        Session["comp_name"] = null;
        Session["Username"] = null;
        Session["dateformat"] = null;
        Session["autogenerated"] = null;
        Session["currency"] = null;
       // Session["ratecode"] = null;
        Session["solorate"] = null;
        Session["decimal"] = null;
        Session["breakup"] = null;
        Session["bwcode"] = null;
        Session["uom"] = null;
        Session["rostatus"] = null;
        Session["tfn"] = null;
        Session["insertsbreakup"] = null;
        Session["premtype"] = null;
        Session["dealtype"] = null;
        Session["prefix"] = null;
        Session["suffix"] = null;
        Session["financestatus"] = null;
        Session["voucherst"] = null;
        Session["roadcat"] = null;
        Session["rodatetime"] = null;
        Session["spacearea"] = null;
        Session["vat"] = null;
        Session["bookstat"] = null;
        Session["cioid"] = null;
        Session["Receipt_no"] = null;
        Session["userhome"] = null;
        Session["Admin"] = null;
        Session["bg_colorpub"] = null;
        Session["validdate_pub"] = null;
        /*new change ankur for agency*/
        Session["agencyratecode"] = null;

        Session["audit"] = null;
        Session["copyrate"] = null;

        Session["rateradio"] = null;
        Session["editionsubrate"] = null;
        Session["addAgencyComm"] = null;
        Session["addAgencyComm_Ret"] = null;
        Session["rate_audit"] = null;
        Session["invoice_no"] = null;
        Session["displaybilltype"] = null;
        Session["clsbilltype"] = null;
        Session["center"] = null;
        Session["centerAdd"] = null;
        if (ConfigurationSettings.AppSettings["CLIENTNAME"].ToString() == "DJ")
        {
            Response.Redirect("logindj.aspx");
        }
        else
        {
            Response.Redirect("login.aspx");
        }


    }
    [Ajax.AjaxMethod(Ajax.HttpSessionStateRequirement.ReadWrite)]
    public void saveLoginInfo(string compcode, string userid, string ip)
    {
        if (Session["SESSIONID"] == null)
        {
            Session["SESSIONID"] = "";
        }

        if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "sql")
        {
            NewAdbooking.Classes.login logindetail = new NewAdbooking.Classes.login();
            logindetail.saveLoginInfo(compcode, userid, ip, "DELETE", Session["SESSIONID"].ToString());
        }
        else
            if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "orcl")
            {
                if (Session["SESSIONID"] == null)
                {
                    Session["SESSIONID"] = "";
                }


                NewAdbooking.classesoracle.login logindetail = new NewAdbooking.classesoracle.login();
                logindetail.saveLoginInfo(compcode, userid, ip, "DELETE", Session["SESSIONID"].ToString());
            }

    }

    #region Web Form Designer generated code
    override protected void OnInit(EventArgs e)
    {
        //
        // CODEGEN: This call is required by the ASP.NET Web Form Designer.
        //
        InitializeComponent();
        base.OnInit(e);
    }

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InitializeComponent()
    {
    }
    #endregion
}