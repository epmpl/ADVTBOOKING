using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;

public partial class BillStatus : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

        Response.Expires = -1;

        if (Session["compcode"] == null)
        {
            //Response.Redirect("login.aspx");
            Response.Write("<script>window.parent.location=\"login.aspx\";</script>");
            return;
        }

        hiddencomcode.Value = Session["compcode"].ToString();
        hiddencompcode.Value = Session["compcode"].ToString();
        hiddenuserid.Value = Session["userid"].ToString();
        hiddenDateFormat.Value = Session["DateFormat"].ToString();
        hiddenusername.Value = Session["Username"].ToString();
        hiddenauto.Value = Session["autogenerated"].ToString();


        Ajax.Utility.RegisterTypeForAjax(typeof(BillStatus));

        //dfgdf
        //***********************************************************************//
        //*****************Code For Read the data from xml File******************//
        //*******************************For The Button**************************//
        //***********************************************************************/

        DataSet objDataSetbu = new DataSet();
        // Read in the XML file
        objDataSetbu.ReadXml(Server.MapPath("XML/button.xml"));
        btnNew.ImageUrl = objDataSetbu.Tables[0].Rows[0].ItemArray[0].ToString();
        btnSave.ImageUrl = objDataSetbu.Tables[0].Rows[0].ItemArray[1].ToString();
        btnModify.ImageUrl = objDataSetbu.Tables[0].Rows[0].ItemArray[2].ToString();
        btnQuery.ImageUrl = objDataSetbu.Tables[0].Rows[0].ItemArray[3].ToString();
        btnExecute.ImageUrl = objDataSetbu.Tables[0].Rows[0].ItemArray[4].ToString();
        btnCancel.ImageUrl = objDataSetbu.Tables[0].Rows[0].ItemArray[5].ToString();
        btnfirst.ImageUrl = objDataSetbu.Tables[0].Rows[0].ItemArray[6].ToString();
        btnprevious.ImageUrl = objDataSetbu.Tables[0].Rows[0].ItemArray[7].ToString();
        btnnext.ImageUrl = objDataSetbu.Tables[0].Rows[0].ItemArray[8].ToString();
        btnlast.ImageUrl = objDataSetbu.Tables[0].Rows[0].ItemArray[9].ToString();
        btnDelete.ImageUrl = objDataSetbu.Tables[0].Rows[0].ItemArray[10].ToString();
        btnExit.ImageUrl = objDataSetbu.Tables[0].Rows[0].ItemArray[11].ToString();


        //********************************For Label****************************************/
        DataSet ds = new DataSet();
        // Read in the XML file
        ds.ReadXml(Server.MapPath("XML/BillStatus.xml"));

        lblbillid.Text = ds.Tables[0].Rows[0].ItemArray[0].ToString();
        lblbillstatus.Text = ds.Tables[0].Rows[0].ItemArray[1].ToString();
        Lblbillalias.Text = ds.Tables[0].Rows[0].ItemArray[2].ToString();



        btnNew.Enabled = true;
        btnSave.Enabled = false;
        btnModify.Enabled = false;
        btnDelete.Enabled = false;
        btnQuery.Enabled = true;
        btnExecute.Enabled = false;
        btnCancel.Enabled = true;
        btnfirst.Enabled = false;
        btnprevious.Enabled = false;
        btnnext.Enabled = false;
        btnlast.Enabled = false;
        btnExit.Enabled = true;

        txtbillid.Enabled = false;
        txtbillstatus.Enabled = false;
        txtbillalias.Enabled = false;



        if (!Page.IsPostBack)
        {
            // txtzonecode.Attributes.Add("OnBlur", "javascript:return uppercase1();");
            //txtzonealias.Attributes.Add("OnBlur", "javascript:return uppercase2();");
            //txtbillstatus.Attributes.Add("OnBlur", "javascript:return autoalias();");
            txtbillstatus.Attributes.Add("OnChange", "javascript:return autoornot();");
            txtbillalias.Attributes.Add("OnChange", "javascript:return capsAlias();");
            txtbillid.Attributes.Add("OnChange", "javascript:return capsCode();");
            //  txtzonename.Attributes.Add("OnClick", "javascript:return check()");
            //***************************Function Of Button Call from Java Script**********************
            btnNew.Attributes.Add("OnClick", "javascript:return billnewclick();");
            btnSave.Attributes.Add("OnClick", "javascript:return billsaveclick();");
            btnModify.Attributes.Add("OnClick", "javascript:return billmodifyclick();");
            btnDelete.Attributes.Add("OnClick", "javascript:return billdeleteclick();");
            btnQuery.Attributes.Add("OnClick", "javascript:return billqueryclick();");
            btnExecute.Attributes.Add("OnClick", "javascript:return billexecuteclick();");
            btnCancel.Attributes.Add("OnClick", "javascript:return billcancelclick('BillStatus');");
            btnfirst.Attributes.Add("OnClick", "javascript:return billfirstclick();");
            btnprevious.Attributes.Add("OnClick", "javascript:return billpreviousclick();");
            btnnext.Attributes.Add("OnClick", "javascript:return billnextclick();");
            btnlast.Attributes.Add("OnClick", "javascript:return billlastclick();");
            btnExit.Attributes.Add("OnClick", "javascript:return billexitclick();");

        }
        if (btnNew.Enabled == false)
            btnNew.ImageUrl = objDataSetbu.Tables[1].Rows[0].ItemArray[0].ToString();
        if (btnSave.Enabled == false)
            btnSave.ImageUrl = objDataSetbu.Tables[1].Rows[0].ItemArray[1].ToString();
        if (btnModify.Enabled == false)
            btnModify.ImageUrl = objDataSetbu.Tables[1].Rows[0].ItemArray[2].ToString();
        if (btnQuery.Enabled == false)
            btnQuery.ImageUrl = objDataSetbu.Tables[1].Rows[0].ItemArray[3].ToString();
        if (btnExecute.Enabled == false)
            btnExecute.ImageUrl = objDataSetbu.Tables[1].Rows[0].ItemArray[4].ToString();
        if (btnCancel.Enabled == false)
            btnCancel.ImageUrl = objDataSetbu.Tables[1].Rows[0].ItemArray[5].ToString();
        if (btnfirst.Enabled == false)
            btnfirst.ImageUrl = objDataSetbu.Tables[1].Rows[0].ItemArray[6].ToString();
        if (btnprevious.Enabled == false)
            btnprevious.ImageUrl = objDataSetbu.Tables[1].Rows[0].ItemArray[7].ToString();
        if (btnnext.Enabled == false)
            btnnext.ImageUrl = objDataSetbu.Tables[1].Rows[0].ItemArray[8].ToString();
        if (btnlast.Enabled == false)
            btnlast.ImageUrl = objDataSetbu.Tables[1].Rows[0].ItemArray[9].ToString();
        if (btnDelete.Enabled == false)
            btnDelete.ImageUrl = objDataSetbu.Tables[1].Rows[0].ItemArray[10].ToString();
        if (btnExit.Enabled == false)
            btnExit.ImageUrl = objDataSetbu.Tables[1].Rows[0].ItemArray[11].ToString();

    }

    #region Web Form Designer generated code
    protected void OnInit(EventArgs e)
    {
        //
        // CODEGEN: This call is required by the ASP.NET Web Form Designer.
        //
        InitializeComponent();
        base.OnInit(e);
    }

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InitializeComponent()
    {

    }
    #endregion






    //*******************************************************************************************//
    //^^^^^^^^Call The This Function From The Javascript For Save the data through the Ajax^^^^^^//
    //*******************************************************************************************//

    [Ajax.AjaxMethod]
    //public DataSet billsave1(string companycode, string billid, string billstatus, string billalias, string UserId)
    public DataSet billsave1(string billid, string billstatus, string billalias)
    {
        DataSet ds = new DataSet();
        if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "sql")
        {
            NewAdbooking.Classes.BillStatus bllsave = new NewAdbooking.Classes.BillStatus();
            
            ds = bllsave.billsave1(billid, billstatus, billalias);
            return ds;

        }

        else
            if(ConfigurationSettings.AppSettings ["ConnectionType"].ToString ()=="orcl")
            {
                NewAdbooking.classesoracle.BillStatus bllsave = new NewAdbooking.classesoracle.BillStatus();

                ds = bllsave.billsave1(billid, billstatus, billalias);
                return ds;

            }
        else
        {
            NewAdbooking.classmysql.BillStatus bllsave = new NewAdbooking.classmysql.BillStatus();
            ds = bllsave.billsave1(billid, billstatus, billalias);
            return ds;
            
        }
    }

    //*******************************************************************************************//
    //^^^^^^^^Call The This Function From The Javascript For Update the data through the Ajax^^^^^//
    //*******************************************************************************************//
    [Ajax.AjaxMethod]
    //		public DataSet Advmodify1(string companycode,string zonecode,string zonename,string alias,string UserId)
    public DataSet billmodify(string billid, string billstatus, string billalias)
    {
        DataSet ds = new DataSet();
        if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "sql")
        {
            NewAdbooking.Classes.BillStatus bllmod = new NewAdbooking.Classes.BillStatus();
            
            ds = bllmod.billmodify(billid, billstatus, billalias);
            return ds;
        }

        else
            if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "orcl")
            {
                NewAdbooking.classesoracle.BillStatus bllmod = new NewAdbooking.classesoracle.BillStatus();

                ds = bllmod.billmodify(billid, billstatus, billalias);
                return ds;

            }
        else
        {
            NewAdbooking.classmysql.BillStatus bllmod = new NewAdbooking.classmysql.BillStatus();
            ds = bllmod.billmodify(billid, billstatus, billalias);
            return ds;

        }
    }


    [Ajax.AjaxMethod]

    public DataSet chkbillid(string billid, string billstatus, string mod)
    {
        DataSet ds = new DataSet();
        if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "sql")
        {
        NewAdbooking.Classes.BillStatus chkbllid = new NewAdbooking.Classes.BillStatus();

        ds = chkbllid.chkbillid(billid, billstatus, mod);
        return ds;
        }
        else
            if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "orcl")
            {
                NewAdbooking.classesoracle.BillStatus chkbllid = new NewAdbooking.classesoracle.BillStatus();

                ds = chkbllid.chkbillid(billid, billstatus, mod);
                return ds;

            }
        else

        {
            NewAdbooking.classmysql.BillStatus chkbllid = new NewAdbooking.classmysql.BillStatus();
            ds = chkbllid.chkbillid(billid, billstatus, mod);
            return ds;
        }
    }


    [Ajax.AjaxMethod]
    //		public DataSet Advexecute1(string companycode,string zonecode,string zonename,string alias,string UserId)
       // public DataSet billexecute1(string companycode, string zonecode, string zonename, string alias, string UserId)
    public DataSet billexecute1(string billid, string billstatus, string billalias)
    {
        DataSet ds = new DataSet();
        if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "sql")

    {
        NewAdbooking.Classes.BillStatus bllexe1 = new NewAdbooking.Classes.BillStatus();
        
        ds = bllexe1.billexecute1(billid, billstatus, billalias);
        return ds;
    }
    else
        if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "orcl")
        {

            NewAdbooking.classesoracle.BillStatus bllexe1 = new NewAdbooking.classesoracle.BillStatus();

            ds = bllexe1.billexecute1(billid, billstatus, billalias);
            return ds;

        }
    else
    {
        NewAdbooking.classmysql.BillStatus bllexe1 = new NewAdbooking.classmysql.BillStatus();
        ds = bllexe1.billexecute1(billid, billstatus, billalias);
        return ds;


    }
    }

    [Ajax.AjaxMethod]
    //		public DataSet Zonefpnl()
    public DataSet billfpnl()
    {
        DataSet ds = new DataSet();
        if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "sql")
        {

            NewAdbooking.Classes.BillStatus first = new NewAdbooking.Classes.BillStatus();           
            ds = first.billfpnl();
            return ds;
        }
        else
            if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "orcl")
            {
                NewAdbooking.classesoracle.BillStatus first = new NewAdbooking.classesoracle.BillStatus();
                ds = first.billfpnl();
                return ds;

            }
        else
        {
            NewAdbooking.classmysql.BillStatus first = new NewAdbooking.classmysql.BillStatus();
            ds = first.billfpnl();
            return ds;


        }
    }


    [Ajax.AjaxMethod]
    //		public DataSet Advdelete(string companycode,string zonecode,string zonename,string alias,string UserId)
    public DataSet billdelete(string billid)
    {         DataSet ds = new DataSet();
        if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "sql")
        {

            NewAdbooking.Classes.BillStatus billdel = new NewAdbooking.Classes.BillStatus();
   
            ds = billdel.billdelete(billid);
            return ds;
        }
        else
            if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "orcl")
            {
                NewAdbooking.classesoracle.BillStatus billdel = new NewAdbooking.classesoracle.BillStatus();

                ds = billdel.billdelete(billid);
                return ds;

            }
        else
        {
            NewAdbooking.classmysql.BillStatus billdel = new NewAdbooking.classmysql.BillStatus();
            ds = billdel.billdelete(billid);
            return ds;
        }
    }


    [Ajax.AjaxMethod]
    //		public DataSet Advexecute1(string companycode,string zonecode,string zonename,string alias,string UserId)
    public DataSet billexecute2(string billid, string billstatus, string billalias)
    {
        DataSet ds = new DataSet();
        if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "sql")
        {

            NewAdbooking.Classes.BillStatus billexe1 = new NewAdbooking.Classes.BillStatus();
            
            ds = billexe1.billexecute2(billid, billstatus, billalias);
            return ds;
        }

        else
            if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "orcl")
            {
                NewAdbooking.classesoracle.BillStatus billexe1 = new NewAdbooking.classesoracle.BillStatus();

                ds = billexe1.billexecute2(billid, billstatus, billalias);
                return ds;

            }
        else
        {
            NewAdbooking.classmysql.BillStatus billexe1 = new NewAdbooking.classmysql.BillStatus();
            ds = billexe1.billexecute2(billid, billstatus, billalias);
            return ds;



        }
    }

    [Ajax.AjaxMethod]
    public DataSet billidauto(string str)
    {
        DataSet ds = new DataSet();

        if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "sql")
        {

            NewAdbooking.Classes.BillStatus chk = new NewAdbooking.Classes.BillStatus();
            ds = chk.billidauto(str);
            return ds;
        }

        else
            if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "orcl")
            {
                NewAdbooking.classesoracle.BillStatus chk = new NewAdbooking.classesoracle.BillStatus();
                ds = chk.billidauto(str);
                return ds;

            }
        else
        {
            NewAdbooking.classmysql.BillStatus chk = new NewAdbooking.classmysql.BillStatus();
            ds = chk.billidauto(str);
            return ds;

        }

    }
    



}
