using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;

public partial class status_master : System.Web.UI.Page
{
    string formname = "status_master";
    static int FlagStatus, fpnl;
    static string saveormodify;
    string message;
    string modname;
    static DataSet executepro = new DataSet();
    static string sm_name_auto, sm_code_auto;
    NewAdbooking.Classes.status_master execute = new NewAdbooking.Classes.status_master();

    protected void Page_Load(object sender, EventArgs e)
    {
        Response.Expires = -1;

        if (Session["compcode"] == null)
        {
            d1.Text = "<script>alert('session Expired');window.close();</script>";
            return;
        }
        else
        {
            hiddencompcode.Value = Session["compcode"].ToString();
            hiddenuserid.Value = Session["userid"].ToString();
            hiddenauto.Value = Session["autogenerated"].ToString();
            hiddenusername.Value = Session["Username"].ToString();
        }

        formname = "status_master";

        hiddenauto.Value = Session["autogenerated"].ToString();
      
        Ajax.Utility.RegisterTypeForAjax(typeof(status_master));

        DataSet objDataSet = new DataSet();
        // Read in the XML file
        objDataSet.ReadXml(Server.MapPath("XML/status_master.xml"));
        lbstatuscode.Text = objDataSet.Tables[0].Rows[0].ItemArray[0].ToString();
        lbstatusname.Text = objDataSet.Tables[0].Rows[0].ItemArray[1].ToString();
        
        //This code reads the label name from the xml file
        DataSet ds = new DataSet();
        // Read in the XML file
        ds.ReadXml(Server.MapPath("XML/button.xml"));
        btnNew.ImageUrl = ds.Tables[0].Rows[0].ItemArray[0].ToString();
        btnSave.ImageUrl = ds.Tables[0].Rows[0].ItemArray[1].ToString();
        btnModify.ImageUrl = ds.Tables[0].Rows[0].ItemArray[2].ToString();
        btnQuery.ImageUrl = ds.Tables[0].Rows[0].ItemArray[3].ToString();
        btnExecute.ImageUrl = ds.Tables[0].Rows[0].ItemArray[4].ToString();
        btnCancel.ImageUrl = ds.Tables[0].Rows[0].ItemArray[5].ToString();
        btnfirst.ImageUrl = ds.Tables[0].Rows[0].ItemArray[6].ToString();
        btnprevious.ImageUrl = ds.Tables[0].Rows[0].ItemArray[7].ToString();
        btnnext.ImageUrl = ds.Tables[0].Rows[0].ItemArray[8].ToString();
        btnlast.ImageUrl = ds.Tables[0].Rows[0].ItemArray[9].ToString();
        btnDelete.ImageUrl = ds.Tables[0].Rows[0].ItemArray[10].ToString();
        btnExit.ImageUrl = ds.Tables[0].Rows[0].ItemArray[11].ToString();

        btnNew.Focus();
        if (!Page.IsPostBack)
        {
            getbuttoncheck(formname);
           //chkstatus(FlagStatus);
            btnSave.Attributes.Add("onclick", "javascript:return save_status_master();");
            //btnNew.Attributes.Add("OnClick", "javascript:return new_status_master();");
            btnDelete.Attributes.Add("onclick", "return confirm('Are you sure you want to delete?');");
            btnExit.Attributes.Add("onclick", "javascript:return close_status_master();");
            txtstatusname.Attributes.Add("OnBlur", "javascript:return autogen11();");
            btnQuery.Attributes.Add("OnClick", "javascript:return chkquery11();");
            //btnModify.Attributes.Add("OnClick", "javascript:return update1();");
        }
        if (btnNew.Enabled == false)
            btnNew.ImageUrl = ds.Tables[1].Rows[0].ItemArray[0].ToString();
        if (btnSave.Enabled == false)
            btnSave.ImageUrl = ds.Tables[1].Rows[0].ItemArray[1].ToString();
        if (btnModify.Enabled == false)
            btnModify.ImageUrl = ds.Tables[1].Rows[0].ItemArray[2].ToString();
        if (btnQuery.Enabled == false)
            btnQuery.ImageUrl = ds.Tables[1].Rows[0].ItemArray[3].ToString();
        if (btnExecute.Enabled == false)
            btnExecute.ImageUrl = ds.Tables[1].Rows[0].ItemArray[4].ToString();
        if (btnCancel.Enabled == false)
            btnCancel.ImageUrl = ds.Tables[1].Rows[0].ItemArray[5].ToString();
        if (btnfirst.Enabled == false)
            btnfirst.ImageUrl = ds.Tables[1].Rows[0].ItemArray[6].ToString();
        if (btnprevious.Enabled == false)
            btnprevious.ImageUrl = ds.Tables[1].Rows[0].ItemArray[7].ToString();
        if (btnnext.Enabled == false)
            btnnext.ImageUrl = ds.Tables[1].Rows[0].ItemArray[8].ToString();
        if (btnlast.Enabled == false)
            btnlast.ImageUrl = ds.Tables[1].Rows[0].ItemArray[9].ToString();
        if (btnDelete.Enabled == false)
            btnDelete.ImageUrl = ds.Tables[1].Rows[0].ItemArray[10].ToString();
        if (btnExit.Enabled == false)
            btnExit.ImageUrl = ds.Tables[1].Rows[0].ItemArray[11].ToString();
    }

    //public void chkstatus(int FlagStatus)
    //{
    //    if (FlagStatus == 0 || FlagStatus == 8)
    //    {
    //        btnNew.Enabled = false;
    //        btnQuery.Enabled = false;
    //        btnDelete.Enabled = false;
    //        btnSave.Enabled = false;
    //        btnExecute.Enabled = false;
    //        btnCancel.Enabled = false;
    //        btnModify.Enabled = false;

    //        btnfirst.Enabled = false;
    //        btnnext.Enabled = false;
    //        btnprevious.Enabled = false;
    //        btnlast.Enabled = false;
    //        btnExit.Enabled = false;
    //        alert("You Are Not Authorised To See This Form");
    //        return false;

    //    }
    //    if (FlagStatus == 1 || FlagStatus == 9)
    //    {
    //        btnNew.Enabled = false;
    //        btnQuery.Enabled = false;
    //        btnDelete.Enabled = false;
    //        btnSave.Enabled = true;
    //        btnExecute.Enabled = false;
    //        btnCancel.Enabled = true;
    //        btnModify.Enabled = false;

    //        btnfirst.Enabled = false;
    //        btnnext.Enabled = false;
    //        btnprevious.Enabled = false;
    //        btnlast.Enabled = false;
    //        btnExit.Enabled = true;
    //        return false;
    //    }
    //    if (FlagStatus == 2 || FlagStatus == 10)
    //    {
    //        btnExecute.Enabled = true;
    //        btnQuery.Enabled = false;
    //        btnDelete.Enabled = false;
    //        btnNew.Enabled = false;
    //        btnCancel.Enabled = true;
    //        btnExecute.Enabled = false;
    //        btnModify.Enabled = false;
    //        btnExit.Enabled = true;

    //        btnSave.Enabled = false;
    //        btnfirst.Enabled = false;
    //        btnnext.Enabled = false;
    //        btnprevious.Enabled = false;
    //        btnlast.Enabled = false;
    //        btnExit.Enabled = true;
    //        return false;

    //    }

    //    if (FlagStatus == 3 || FlagStatus == 11)
    //    {
    //        btnNew.Enabled = false;
    //        btnQuery.Enabled = false;
    //        btnExecute.Enabled = false;
    //        btnDelete.Enabled = false;
    //        btnCancel.Enabled = true;
    //        btnExit.Enabled = true;


    //        btnModify.Enabled = false;

    //        btnSave.Enabled = true;
    //        btnfirst.Enabled = false;
    //        btnnext.Enabled = false;
    //        btnprevious.Enabled = false;
    //        btnlast.Enabled = false;
    //    }

    //    if (FlagStatus == 4 || FlagStatus == 12)
    //    {
    //        btnNew.Enabled = false;
    //        btnExecute.Enabled = false;
    //        btnDelete.Enabled = false;
    //        btnCancel.Enabled = true;
    //        btnExit.Enabled = true;


    //        btnModify.Enabled = false;

    //        btnSave.Enabled = false;
    //        btnfirst.Enabled = false;
    //        btnnext.Enabled = false;
    //        btnprevious.Enabled = false;
    //        btnlast.Enabled = false;
    //    }
    //    if (FlagStatus == 5 || FlagStatus == 13)
    //    {
    //        btnNew.Enabled = false;
    //        btnExecute.Enabled = false;
    //        btnDelete.Enabled = false;
    //        btnCancel.Enabled = true;
    //        btnExit.Enabled = true;


    //        btnModify.Enabled = false;

    //        btnSave.Enabled = false;
    //        btnfirst.Enabled = false;
    //        btnnext.Enabled = false;
    //        btnprevious.Enabled = false;
    //        btnlast.Enabled = false;
    //    }
    //    if (FlagStatus == 6 || FlagStatus == 14)
    //    {
    //        btnNew.Enabled = false;
    //        btnExecute.Enabled = false;
    //        btnDelete.Enabled = false;
    //        btnCancel.Enabled = true;
    //        btnExit.Enabled = true;


    //        btnModify.Enabled = false;

    //        btnSave.Enabled = false;
    //        btnfirst.Enabled = false;
    //        btnnext.Enabled = false;
    //        btnprevious.Enabled = false;
    //        btnlast.Enabled = false;
    //    }
    //    if (FlagStatus == 7 || FlagStatus == 15)
    //    {
    //        btnNew.Enabled = false;
    //        btnExecute.Enabled = false;
    //        btnDelete.Enabled = false;
    //        btnCancel.Enabled = true;
    //        btnExit.Enabled = true;


    //        btnModify.Enabled = false;

    //        btnSave.Enabled = true;
    //        btnfirst.Enabled = false;
    //        btnnext.Enabled = false;
    //        btnprevious.Enabled = false;
    //        btnlast.Enabled = false;
    //    }
    //    return false;
    //}
    public void getbuttoncheck(string formname)
    {
        DataSet butt = new DataSet();
        if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "sql")
        {
            NewAdbooking.Classes.classlibraryforbutton getpermission = new NewAdbooking.Classes.classlibraryforbutton();

            butt = getpermission.getbuttonpermission(Session["compcode"].ToString(), Session["userid"].ToString(), formname);
           


         
        }
        else
            if(ConfigurationSettings.AppSettings ["ConnectionType"].ToString ()=="orcl")
            {
                NewAdbooking.classesoracle.classlibraryforbutton getpermission = new NewAdbooking.classesoracle.classlibraryforbutton();

                butt = getpermission.getbuttonpermission(Session["compcode"].ToString(), Session["userid"].ToString(), formname);

            }
        else
        {
            NewAdbooking.classmysql.classlibraryforbutton getpermission = new NewAdbooking.classmysql.classlibraryforbutton();
            butt = getpermission.getbuttonpermission(Session["compcode"].ToString(), Session["userid"].ToString(), formname);
        }

    string id = butt.Tables[0].Rows[0].ItemArray[0].ToString();
    if (id != "0")
    {
        //var id = ds.Tables[0].Rows[0].button_id;



        if (id == "0" || id == "8")
        {

            FlagStatus = 0;

            btnNew.Enabled = false;
            btnQuery.Enabled = false;
            btnExecute.Enabled = false;
            btnCancel.Enabled = false;
            btnExit.Enabled = false;
            btnDelete.Enabled = false;
            btnModify.Enabled = false;

            btnSave.Enabled = false;
            btnModify.Enabled = false;
            btnfirst.Enabled = false;
            btnnext.Enabled = false;
            btnprevious.Enabled = false;
            btnlast.Enabled = false;



            //window.location.href = 'EnterPage.aspx';
            //alert("You Are Not Authorised To See This Form");
            //FlagStatus = 0;


        }
        if (id == "1" || id == "9")
        {
            btnNew.Enabled = true;
            btnQuery.Enabled = true;
            btnCancel.Enabled = true;
            btnExit.Enabled = true;
            btnDelete.Enabled = false;
            btnExecute.Enabled = false;

            btnSave.Enabled = false;
            btnModify.Enabled = false;
            btnfirst.Enabled = false;
            btnnext.Enabled = false;
            btnprevious.Enabled = false;
            btnlast.Enabled = false;
            FlagStatus = 1;

        }
        if (id == "2" || id == "10")
        {

            btnNew.Enabled = false;
            btnExecute.Enabled = false;
            btnQuery.Enabled = true;
            btnCancel.Enabled = true;
            btnExit.Enabled = true;
            btnDelete.Enabled = false;
            //a//btnModify.Enabled = true;
            btnModify.Enabled = false;

            btnSave.Enabled = false;
            //a// btnfirst.Enabled = true;
            btnfirst.Enabled = false;
            btnnext.Enabled = false;
            btnprevious.Enabled = false;
            btnlast.Enabled = false;
            btnExit.Enabled = true;
            FlagStatus = 2;


        }
        if (id == "3" || id == "11")
        {
            btnNew.Enabled = true;
            btnQuery.Enabled = true;
            btnExecute.Enabled = false;
            btnDelete.Enabled = false;
            btnModify.Enabled = false;
            btnCancel.Enabled = true;
            btnExit.Enabled = true;
            btnDelete.Enabled = false;


            btnSave.Enabled = false;
            btnfirst.Enabled = false;
            btnnext.Enabled = false;
            btnprevious.Enabled = false;
            btnlast.Enabled = false;

            FlagStatus = 3;



        }
        if (id == "4" || id == "12")
        {
            btnNew.Enabled = false;
            btnQuery.Enabled = true;
            btnCancel.Enabled = true;
            btnExit.Enabled = true;
            btnDelete.Enabled = false;
            btnfirst.Enabled = false;
            btnnext.Enabled = false;
            btnprevious.Enabled = false;
            btnlast.Enabled = false;
            btnExecute.Enabled = false;

            btnNew.Enabled = false;
            btnExecute.Enabled = false;
            btnDelete.Enabled = false;
            btnCancel.Enabled = true;
            btnExit.Enabled = true;


            btnModify.Enabled = false;

            btnSave.Enabled = false;
            btnfirst.Enabled = false;
            btnnext.Enabled = false;
            btnprevious.Enabled = false;
            btnlast.Enabled = false;
            FlagStatus = 4;



        }
        if (id == "5" || id == "13")
        {
            btnNew.Enabled = true;
            btnSave.Enabled = false;
            btnQuery.Enabled = true;
            btnCancel.Enabled = true;
            btnExit.Enabled = true;
            btnDelete.Enabled = false;
            btnfirst.Enabled = false;
            btnnext.Enabled = false;
            btnprevious.Enabled = false;
            btnlast.Enabled = false;
            btnExecute.Enabled = false;
            btnModify.Enabled = false;
            FlagStatus = 5;
        }
        if (id == "6" || id == "14")
        {
            btnNew.Enabled = false;
            btnSave.Enabled = false;
            btnQuery.Enabled = true;
            btnModify.Enabled = false;
            btnCancel.Enabled = true;
            btnExit.Enabled = true;
            btnDelete.Enabled = false;
            btnfirst.Enabled = false;
            btnnext.Enabled = false;
            btnprevious.Enabled = false;
            btnlast.Enabled = false;
            btnExecute.Enabled = false;

            FlagStatus = 6;
        }
        if (id == "7" || id == "15")
        {
            btnNew.Enabled = true;
            btnSave.Enabled = false;
            btnQuery.Enabled = true;
            btnModify.Enabled = false;
            btnCancel.Enabled = true;
            btnExit.Enabled = true;
            btnDelete.Enabled = false;
            btnfirst.Enabled = false;
            btnnext.Enabled = false;
            btnprevious.Enabled = false;
            btnlast.Enabled = false;
            btnExecute.Enabled = false;
            FlagStatus = 7;

        }
    }
     



    }

    public void chkstatus(int FlagStatus)
    {
        if (FlagStatus == 0 || FlagStatus == 8)
        {
            btnNew.Enabled = false;
            btnQuery.Enabled = false;
            btnDelete.Enabled = false;
            btnSave.Enabled = false;
            btnExecute.Enabled = false;
            btnCancel.Enabled = false;
            btnModify.Enabled = false;

            btnfirst.Enabled = false;
            btnnext.Enabled = false;
            btnprevious.Enabled = false;
            btnlast.Enabled = false;
            btnExit.Enabled = false;



        }
        if (FlagStatus == 1 || FlagStatus == 9)
        {
            btnNew.Enabled = false;
            btnQuery.Enabled = true;
            btnDelete.Enabled = false;
            btnSave.Enabled = true;
            btnExecute.Enabled = false;
            btnCancel.Enabled = true;
            btnModify.Enabled = false;

            btnfirst.Enabled = false;
            btnnext.Enabled = false;
            btnprevious.Enabled = false;
            btnlast.Enabled = false;
            btnExit.Enabled = true;

        }
        if (FlagStatus == 2 || FlagStatus == 10)
        {
            btnExecute.Enabled = true;
            btnQuery.Enabled = false;
            btnDelete.Enabled = false;
            btnNew.Enabled = false;
            btnCancel.Enabled = true;
            btnExecute.Enabled = false;
            btnModify.Enabled = false;
            btnExit.Enabled = true;

            btnSave.Enabled = false;
            btnfirst.Enabled = false;
            btnnext.Enabled = false;
            btnprevious.Enabled = false;
            btnlast.Enabled = false;
            btnExit.Enabled = true;


        }

        if (FlagStatus == 3 || FlagStatus == 11)
        {
            btnNew.Enabled = false;
            btnQuery.Enabled = false;
            btnExecute.Enabled = false;
            btnDelete.Enabled = false;
            btnCancel.Enabled = true;
            btnExit.Enabled = true;


            btnModify.Enabled = false;

            btnSave.Enabled = true;
            btnfirst.Enabled = false;
            btnnext.Enabled = false;
            btnprevious.Enabled = false;
            btnlast.Enabled = false;
        }

        if (FlagStatus == 4 || FlagStatus == 12)
        {
            btnNew.Enabled = false;
            btnExecute.Enabled = false;
            btnDelete.Enabled = false;
            btnCancel.Enabled = true;
            btnExit.Enabled = true;


            btnModify.Enabled = false;

            btnSave.Enabled = false;
            btnfirst.Enabled = false;
            btnnext.Enabled = false;
            btnprevious.Enabled = false;
            btnlast.Enabled = false;
        }
        if (FlagStatus == 5 || FlagStatus == 13)
        {
            btnNew.Enabled = false;
            btnExecute.Enabled = false;
            btnDelete.Enabled = false;
            btnCancel.Enabled = true;
            btnExit.Enabled = true;


            btnModify.Enabled = false;

            btnSave.Enabled = false;
            btnfirst.Enabled = false;
            btnnext.Enabled = false;
            btnprevious.Enabled = false;
            btnlast.Enabled = false;
        }
        if (FlagStatus == 6 || FlagStatus == 14)
        {
            btnNew.Enabled = false;
            btnExecute.Enabled = false;
            btnDelete.Enabled = false;
            btnCancel.Enabled = true;
            btnExit.Enabled = true;


            btnModify.Enabled = false;

            btnSave.Enabled = false;
            btnfirst.Enabled = false;
            btnnext.Enabled = false;
            btnprevious.Enabled = false;
            btnlast.Enabled = false;
        }
        if (FlagStatus == 7 || FlagStatus == 15)
        {
            btnNew.Enabled = false;
            btnExecute.Enabled = false;
            btnDelete.Enabled = false;
            btnCancel.Enabled = true;
            btnExit.Enabled = true;


            btnModify.Enabled = false;

            btnSave.Enabled = true;
            btnfirst.Enabled = false;
            btnnext.Enabled = false;
            btnprevious.Enabled = false;
            btnlast.Enabled = false;
        }


    }

    public void updateStatus()
    {
        chkstatus(FlagStatus);
        if (FlagStatus == 2 || FlagStatus == 3)
        {
            btnQuery.Enabled = true;
            btnExecute.Enabled = false;
            btnSave.Enabled = false;
            btnModify.Enabled = true;
            btnfirst.Enabled = true;
            btnnext.Enabled = true;
            btnprevious.Enabled = true;
            btnlast.Enabled = true;
            btnDelete.Enabled = false;
        }
        if (FlagStatus == 4)
        {
            btnDelete.Enabled = true;
            btnExecute.Enabled = false;
            btnSave.Enabled = false;
            btnQuery.Enabled = true;
            btnModify.Enabled = false;
            btnfirst.Enabled = true;
            btnnext.Enabled = true;
            btnprevious.Enabled = true;
            btnlast.Enabled = true;

        }
        if (FlagStatus == 5)
        {
            btnDelete.Enabled = true;
            btnExecute.Enabled = false;
            btnSave.Enabled = false;
            btnQuery.Enabled = true;
            btnModify.Enabled = false;
            btnfirst.Enabled = true;
            btnnext.Enabled = true;
            btnprevious.Enabled = true;
            btnlast.Enabled = true;

        }
        if (FlagStatus == 6 || FlagStatus == 7)
        {
            btnDelete.Enabled = true;
            btnExecute.Enabled = false;
            btnSave.Enabled = false;
            btnQuery.Enabled = true;
            btnModify.Enabled = true;
            btnfirst.Enabled = true;
            btnnext.Enabled = true;
            btnprevious.Enabled = true;
            btnlast.Enabled = true;

        }
        if (FlagStatus == 1 || FlagStatus == 0)
        {
            btnDelete.Enabled = false;
            btnExecute.Enabled = false;
            btnSave.Enabled = false;
            btnQuery.Enabled = true;
            btnModify.Enabled = false;
            btnfirst.Enabled = false;
            btnnext.Enabled = false;
            btnprevious.Enabled = false;
            btnlast.Enabled = false;

        }
    }
    protected void btnNew_Click(object sender, EventArgs e)
    {
        pnew.Value = "1";
        //modify.Value = "2";

        txtstatuscode.Text = "";
        txtstatusname.Text = "";
        
        query.Value = "1";

        saveormodify = "0";

        if (Session["autogenerated"].ToString() == "1")
        {
            txtstatuscode.Enabled = false;
           // txtstatusname.Focus();
            ScriptManager1.SetFocus(txtstatusname);
        }
        else
        {
            txtstatuscode.Enabled = true;
            //txtstatuscode.Focus();
            ScriptManager1.SetFocus(txtstatuscode);
        }
        //txtstatusname.Enabled = true;
        //txtstatusname.Focus();
        //ScriptManager.RegisterClientScriptBlock(this, typeof(status_master), "ss", "new_status_master()", true);
        txtstatusname.Enabled = true;
        chkstatus(FlagStatus);
        btnSave.Enabled = true;
        btnNew.Enabled = false;
        btnQuery.Enabled = false;
        //btnCancel.Enabled = true;
        //btnExit.Enabled = true;
       // ScriptManager1.SetFocus(txtstatusname);
        //return;
        btnimage();
    }
    protected void btnSave_Click(object sender, EventArgs e)
    {
        pnew.Value = "0";
        string statuscode = txtstatuscode.Text.Trim();
        string statusname = txtstatusname.Text.Trim();
        query.Value = "1";
        //if (Session["compcode"].ToString() == null)
        //{
            //message = "Session Expired.Please Login Again.";//of " + statusname + " ";
            //AspNetMessageBox(message);
            //txtstatuscode.Text = "";
            //return;
            //message = "Session Expired.Please Login Again.";//of " + statusname + " ";
            //AspNetMessageBox(message);
            //Response.Redirect("Login.aspx");
            //return;
          //  }

        try
        {
            string sess = Session["compcode"].ToString();
        }
        catch (Exception ex)
        {
            ScriptManager.RegisterClientScriptBlock(this, typeof(status_master), "abc", "alert('session Expired');window.close();", true);

            return;
        }
        if (saveormodify == "0")
        {
            DataSet ds = new DataSet();
            if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "sql")
            {
                NewAdbooking.Classes.status_master getcode = new NewAdbooking.Classes.status_master();

                ds = getcode.chkcode(statuscode, Session["compcode"].ToString(), statusname);
            }
            else
                if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "orcl")
                {
                    NewAdbooking.classesoracle.status_master getcode = new NewAdbooking.classesoracle.status_master();

                    ds = getcode.chkcode(statuscode, Session["compcode"].ToString(), statusname);

                }
                else
                {
                    NewAdbooking.classmysql.status_master getcode = new NewAdbooking.classmysql.status_master();

                    ds = getcode.chkcode(statuscode, Session["compcode"].ToString(), statusname);

                }
            //if (statuscode == "")
            //{
            //    message = "Please Enter Status Code";//of " + statusname + " ";
            //    AspNetMessageBox(message);
            //    return;

            //}
            if (ds.Tables[0].Rows.Count > 0)
            {

                message = "This Status Code is already assigned";//of " + statusname + " ";
                AspNetMessageBox(message);
                txtstatuscode.Text = "";
                return;

            }
            if (ds.Tables[1].Rows.Count > 0 && statusname != modname)
            {

                message = "This Status Name is already assigned";//of " + statusname + " ";
                AspNetMessageBox(message);
                txtstatusname.Text = "";
                return;

            }
            else
            {
                DataSet di = new DataSet();

                if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "sql")
                {
                    NewAdbooking.Classes.status_master insert = new NewAdbooking.Classes.status_master();
                    di = insert.insert_status_master(statuscode, statusname, statusname, Session["compcode"].ToString(), Session["userid"].ToString());
                }
                else
                    if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "orcl")
                    {
                        NewAdbooking.classesoracle.status_master insert = new NewAdbooking.classesoracle.status_master();
                        di = insert.insert_status_master(statuscode, statusname, statusname, Session["compcode"].ToString(), Session["userid"].ToString());

                    }
                    else
                    {
                        NewAdbooking.classmysql.status_master insert = new NewAdbooking.classmysql.status_master();
                        di = insert.insert_status_master(statuscode, statusname, statusname, Session["compcode"].ToString(), Session["userid"].ToString());

                    }

                DataSet ds1 = new DataSet();
                ds1.ReadXml(Server.MapPath("XML/errorMessage.xml"));
                message = ds1.Tables[0].Rows[0].ItemArray[0].ToString();
                AspNetMessageBox(message);

                txtstatusname.Text = "";
                txtstatuscode.Text = "";

                txtstatuscode.Enabled = false;
                txtstatusname.Enabled = false;

                //AspNetMessageBox(message);
                getbuttoncheck(formname);
                btnimage();
                return;


            }


        }
        /////////////////for modify
        else
        {
            //*******************************************************************************


            if (hiddenmod.Value != txtstatusname.Text)
            {
                DataSet ds = new DataSet();
                if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "sql")
                {
                    NewAdbooking.Classes.status_master getcode = new NewAdbooking.Classes.status_master();

                    ds = getcode.chkcode(statuscode, Session["compcode"].ToString(), statusname);
                }
                else
                    if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "orcl")
                    {
                        NewAdbooking.classesoracle.status_master getcode = new NewAdbooking.classesoracle.status_master();

                        ds = getcode.chkcode(statuscode, Session["compcode"].ToString(), statusname);

                    }
                    else
                    {
                        NewAdbooking.classmysql.status_master getcode = new NewAdbooking.classmysql.status_master();

                        ds = getcode.chkcode(statuscode, Session["compcode"].ToString(), statusname);

                    }


                if (ds.Tables[1].Rows.Count > 0)
                {

                    message = "This Status Name is already assigned";//of " + statusname + " ";
                    AspNetMessageBox(message);
                    txtstatusname.Text = "";
                    ScriptManager1.SetFocus(txtstatusname);
                    return;

                }
                else
                {
                  
                    DataSet du = new DataSet();
                if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "sql")
                {
                    NewAdbooking.Classes.status_master upadte1 = new NewAdbooking.Classes.status_master();

                    du = upadte1.update_status_master(statuscode, statusname, statusname, Session["compcode"].ToString(), Session["userid"].ToString());
                }
                else
                    if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "orcl")
                    {
                        NewAdbooking.classesoracle.status_master upadte1 = new NewAdbooking.classesoracle.status_master();

                        du = upadte1.update_status_master(statuscode, statusname, statusname, Session["compcode"].ToString(), Session["userid"].ToString());

                    }
                    else
                    {
                        NewAdbooking.classmysql.status_master upadte1 = new NewAdbooking.classmysql.status_master();

                        du = upadte1.update_status_master(statuscode, statusname, statusname, Session["compcode"].ToString(), Session["userid"].ToString());

                    }

                txtstatusname.Enabled = false;
                txtstatuscode.Enabled = false;

                executepro.Tables[0].Rows[fpnl].ItemArray[0] = txtstatuscode.Text;
                executepro.Tables[0].Rows[fpnl].ItemArray[1] = txtstatusname.Text;

                if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "sql")
                {
                    NewAdbooking.Classes.status_master execute = new NewAdbooking.Classes.status_master();
                    executepro = execute.executequery(sm_code_auto, sm_name_auto, Session["compcode"].ToString());//, Session["userid"].ToString());
                }
                else if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "orcl")
                {
                    NewAdbooking.classesoracle.status_master execute = new NewAdbooking.classesoracle.status_master();
                    executepro = execute.executequery(sm_code_auto, sm_name_auto, Session["compcode"].ToString());//, Session["userid"].ToString());
                }
                else
                {
                    NewAdbooking.classmysql.status_master execute = new NewAdbooking.classmysql.status_master();
                    executepro = execute.executequery(sm_code_auto, sm_name_auto, Session["compcode"].ToString());//, Session["userid"].ToString());
                }
                //DataSet ds = new DataSet();
                //ds = executepro;
                updateStatus();
                if (fpnl == 0)
                {
                    btnfirst.Enabled = false;
                    btnprevious.Enabled = false;
                }
                else if (fpnl == executepro.Tables[0].Rows.Count - 1)
                {
                    btnnext.Enabled = false;
                    btnlast.Enabled = false;
                }
                if (executepro.Tables[0].Rows.Count == 1)
                {
                    btnfirst.Enabled = false;
                    btnprevious.Enabled = false;
                    btnnext.Enabled = false;
                    btnlast.Enabled = false;
                }
                DataSet ds2 = new DataSet();
                ds2.ReadXml(Server.MapPath("XML/errorMessage.xml"));
                message = ds2.Tables[0].Rows[0].ItemArray[1].ToString();
                AspNetMessageBox(message);
                btnimage();
                return;



            }
                

            }
            else
            {


                //**********************************************************************************
                //  query.Value = "2";
                DataSet du = new DataSet();
                if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "sql")
                {
                    NewAdbooking.Classes.status_master upadte1 = new NewAdbooking.Classes.status_master();

                    du = upadte1.update_status_master(statuscode, statusname, statusname, Session["compcode"].ToString(), Session["userid"].ToString());
                }
                else
                    if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "orcl")
                    {
                        NewAdbooking.classesoracle.status_master upadte1 = new NewAdbooking.classesoracle.status_master();

                        du = upadte1.update_status_master(statuscode, statusname, statusname, Session["compcode"].ToString(), Session["userid"].ToString());

                    }
                    else
                    {
                        NewAdbooking.classmysql.status_master upadte1 = new NewAdbooking.classmysql.status_master();

                        du = upadte1.update_status_master(statuscode, statusname, statusname, Session["compcode"].ToString(), Session["userid"].ToString());

                    }

                txtstatusname.Enabled = false;
                txtstatuscode.Enabled = false;

                executepro.Tables[0].Rows[fpnl].ItemArray[0] = txtstatuscode.Text;
                executepro.Tables[0].Rows[fpnl].ItemArray[1] = txtstatusname.Text;

                if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "sql")
                {
                    NewAdbooking.Classes.status_master execute = new NewAdbooking.Classes.status_master();
                    executepro = execute.executequery(sm_code_auto, sm_name_auto, Session["compcode"].ToString());//, Session["userid"].ToString());
                }
                else if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "orcl")
                {
                    NewAdbooking.classesoracle.status_master execute = new NewAdbooking.classesoracle.status_master();
                    executepro = execute.executequery(sm_code_auto, sm_name_auto, Session["compcode"].ToString());//, Session["userid"].ToString());
                }
                else
                {
                    NewAdbooking.classmysql.status_master execute = new NewAdbooking.classmysql.status_master();
                    executepro = execute.executequery(sm_code_auto, sm_name_auto, Session["compcode"].ToString());//, Session["userid"].ToString());
                }
                //DataSet ds = new DataSet();
                //ds = executepro;
                updateStatus();
                if (fpnl == 0)
                {
                    btnfirst.Enabled = false;
                    btnprevious.Enabled = false;
                }
                else if (fpnl == executepro.Tables[0].Rows.Count - 1)
                {
                    btnnext.Enabled = false;
                    btnlast.Enabled = false;
                }
                if (executepro.Tables[0].Rows.Count == 1)
                {
                    btnfirst.Enabled = false;
                    btnprevious.Enabled = false;
                    btnnext.Enabled = false;
                    btnlast.Enabled = false;
                }
                DataSet ds2 = new DataSet();
                ds2.ReadXml(Server.MapPath("XML/errorMessage.xml"));
                message = ds2.Tables[0].Rows[0].ItemArray[1].ToString();
                AspNetMessageBox(message);
                btnimage();
                return;



            }
        }

    }
    protected void btnModify_Click(object sender, EventArgs e)
    {
        pnew.Value = "0";
        query.Value = "1";
        modname = txtstatusname.Text;
       // txtstatuscode.Enabled = false;
       // txtstatusname.Enabled = true;
        try
        {
            string sess = Session["compcode"].ToString();
        }
        catch (Exception ex)
        {
            ScriptManager.RegisterClientScriptBlock(this, typeof(status_master), "abc", "alert('session Expired');window.close();", true);

            return;
        }
        saveormodify = "1";
        chkstatus(FlagStatus);
        btnSave.Enabled = true;
        btnQuery.Enabled = false;
        btnExecute.Enabled = false;
        ScriptManager1.SetFocus(btnSave);
        hiddenmod.Value= txtstatusname.Text;
        if (Session["autogenerated"].ToString() == "1")
        {
            txtstatuscode.Enabled = false;
            txtstatusname.Enabled = true;
        }
        else
        {
            txtstatuscode.Enabled = false;
            txtstatusname.Enabled = true;
        }
        btnimage();
    }
    protected void btnQuery_Click(object sender, EventArgs e)
    {
        try
        {
            string sess = Session["compcode"].ToString();
        }
        catch (Exception ex)
        {
            ScriptManager.RegisterClientScriptBlock(this, typeof(status_master), "abc", "alert('session Expired');window.close();", true);

            return;
        }
        fpnl = 0;
        txtstatusname.Text = "";
        txtstatuscode.Text = "";
        pnew.Value = "0";
        query.Value = "0";
        txtstatusname.Enabled = true;
        txtstatuscode.Enabled = true;

        chkstatus(FlagStatus);

        btnQuery.Enabled = false;
        btnExecute.Enabled = true;
        btnSave.Enabled = false;
        btnimage();
        ScriptManager1.SetFocus(btnExecute);
    }
    protected void btnExecute_Click(object sender, EventArgs e)
    {
        //if (Session["compcode"].ToString() == null)
        //{
        //    message = "Session Expired.Please Login Again.";//of " + statusname + " ";
        //    AspNetMessageBox(message);
        //    txtstatuscode.Text = "";
        //    return;
        //}
        try
        {
            string sess = Session["compcode"].ToString();
        }
        catch (Exception ex)
        {
            ScriptManager.RegisterClientScriptBlock(this, typeof(status_master), "abc", "alert('session Expired');window.close();", true);

            return;
        }
        pnew.Value = "0";
        string statuscode = txtstatuscode.Text;
        sm_code_auto = statuscode;
        string statusname = txtstatusname.Text;
        sm_name_auto = statusname;
        query.Value = "1";
        if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "sql")
        {
            NewAdbooking.Classes.status_master chkexecute = new NewAdbooking.Classes.status_master();

            executepro = chkexecute.executequery(statuscode, statusname, Session["compcode"].ToString());


        }
            else
            if(ConfigurationSettings .AppSettings ["ConnectionType"].ToString ()=="orcl")
            {
                NewAdbooking.classesoracle.status_master chkexecute = new NewAdbooking.classesoracle.status_master();

                executepro = chkexecute.executequery(statuscode, statusname, Session["compcode"].ToString());

            }
        else
        {
            NewAdbooking.classmysql.status_master chkexecute = new NewAdbooking.classmysql.status_master();
            executepro = chkexecute.executequery(statuscode, statusname, Session["compcode"].ToString());
        }

            if (executepro.Tables[0].Rows.Count == 0)
            {

                message = "Your Search Produced No Result";
                AspNetMessageBox(message);
                chkstatus(FlagStatus);


                updateStatus();
                getbuttoncheck(formname);
                txtstatusname.Text = "";
                txtstatuscode.Text = "";
                updateStatus();
                btnNew.Enabled = true;
                btnModify.Enabled = false;
                btnfirst.Enabled = false;
                btnprevious.Enabled = false;
                btnnext.Enabled = false;
                btnlast.Enabled = false;
                btnDelete.Enabled = false;
                btnimage();
                return;
            }
            else
            {
                txtstatuscode.Text = executepro.Tables[0].Rows[0].ItemArray[0].ToString();
                txtstatusname.Text = executepro.Tables[0].Rows[0].ItemArray[1].ToString();
                txtstatuscode.Enabled = false;
                txtstatusname.Enabled = false;
                updateStatus();
                btnfirst.Enabled = false;
                btnprevious.Enabled = false;
            }


            if (executepro.Tables[0].Rows.Count == 1)
            {
                btnnext.Enabled = false;
                btnlast.Enabled = false;
                btnfirst.Enabled = false;
                btnprevious.Enabled = false;
            }
            else
            {
                btnnext.Enabled = true;
                btnlast.Enabled = true;
                btnfirst.Enabled = false;
                btnprevious.Enabled = false;
            }
            btnimage();
        ScriptManager1.SetFocus(btnModify);
    }
    protected void AspNetMessageBox(string strMessage)
    {
        string strAlert = "";
        strAlert = "alert('" + strMessage + "')";
        ScriptManager.RegisterClientScriptBlock(this, typeof(status_master), "ShowAlert", strAlert, true);
    }
    [Ajax.AjaxMethod(Ajax.HttpSessionStateRequirement.Read)]

    public DataSet adchkadvcode(string str)
    {
        DataSet ds = new DataSet();
        if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "sql")
        {
            NewAdbooking.Classes.status_master auto = new NewAdbooking.Classes.status_master();

            ds = auto.autocode(str,Session["compcode"].ToString());
            return ds;
        }
        else
            if(ConfigurationSettings.AppSettings ["ConnectionType"].ToString ()=="orcl")
            {
                NewAdbooking.classesoracle.status_master auto = new NewAdbooking.classesoracle.status_master();

                ds = auto.autocode(str, Session["compcode"].ToString());
                return ds;
            }
        else
        {
            NewAdbooking.classmysql.status_master auto = new NewAdbooking.classmysql.status_master();
            ds = auto.autocode(str, Session["compcode"].ToString());
            return ds;
        }

    }


    protected void btnDelete_Click(object sender, EventArgs e)
    {
            //if (Session["compcode"].ToString() == null)
            //{
            //    message = "Session Expired.Please Login Again.";//of " + statusname + " ";
            //    AspNetMessageBox(message);
            //    txtstatuscode.Text = "";
            //    return;
            //}
            try
            {
                string sess = Session["compcode"].ToString();
            }
            catch (Exception ex)
            {
                ScriptManager.RegisterClientScriptBlock(this, typeof(status_master), "abc", "alert('session Expired');window.close();", true);

                return;
            }
            string code = txtstatuscode.Text;
            query.Value = "1";
            DataSet ds1 = new DataSet();
            if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "sql")
            {
                NewAdbooking.Classes.status_master del = new NewAdbooking.Classes.status_master();
                ds1 = del.delete_status_master(code, Session["compcode"].ToString());
                NewAdbooking.Classes.status_master execute = new NewAdbooking.Classes.status_master();
                executepro = execute.executequery(sm_code_auto, sm_name_auto, Session["compcode"].ToString());//, Session["userid"].ToString());
              
            }
            else

                if (ConfigurationSettings.AppSettings["ConnectionType"].ToString() == "orcl")
                {
                    NewAdbooking.classesoracle.status_master del = new NewAdbooking.classesoracle.status_master();
                    ds1 = del.delete_status_master(code, Session["compcode"].ToString());
                    NewAdbooking.classesoracle.status_master execute = new NewAdbooking.classesoracle.status_master();
                    executepro = execute.executequery(sm_code_auto, sm_name_auto, Session["compcode"].ToString());//, Session["userid"].ToString());

                }
                else
                {
                    NewAdbooking.classmysql.status_master del = new NewAdbooking.classmysql.status_master();
                    ds1 = del.delete_status_master(code, Session["compcode"].ToString());

                    NewAdbooking.classmysql.status_master execute = new NewAdbooking.classmysql.status_master();

                    executepro = execute.executequery(sm_code_auto, sm_name_auto, Session["compcode"].ToString());//, Session["userid"].ToString());               


                }
            DataSet ds3 = new DataSet();
            ds3.ReadXml(Server.MapPath("XML/errorMessage.xml"));
            message = ds3.Tables[0].Rows[0].ItemArray[2].ToString();
            AspNetMessageBox(message);
            int a = executepro.Tables[0].Rows.Count;
            if (a <= 0)
            {
                //if (a < 0)
                //{
                message = "No more data is here to be deleted";
                //AspNetMessageBox(message);
                ScriptManager.RegisterClientScriptBlock(this, typeof(status_master), "enable", "alert('" + message + "');", true);
                //}
                //else
                //{
                //    DataSet ds23 = new DataSet();
                //    ds23.ReadXml(Server.MapPath("XML/errorMessage.xml"));
                //    message = ds23.Tables[0].Rows[0].ItemArray[2].ToString();
                //    AspNetMessageBox(message);
                //}
                chkstatus(FlagStatus);


                updateStatus();
                getbuttoncheck(formname);
                txtstatusname.Text = "";
                txtstatuscode.Text = "";
                btnimage();
                return;

            }
            //else if (fpnl == -1 || fpnl <= a)
            else if (fpnl == -1 || fpnl >= a)
            {
                DataSet ds = new DataSet();

                ds = executepro;
                txtstatuscode.Text = ds.Tables[0].Rows[0].ItemArray[0].ToString();
                txtstatusname.Text = ds.Tables[0].Rows[0].ItemArray[1].ToString();
                btnfirst.Enabled = false;
                btnprevious.Enabled = false;
                if (a == 1)
                {
                    btnnext.Enabled = false;
                    btnlast.Enabled = false;
                }
                else
                {
                    btnnext.Enabled = true;
                    btnlast.Enabled = true;
                }
                fpnl = 0;
            }

            else
            {
                DataSet ds = new DataSet();
                ds = executepro;
                txtstatuscode.Text = ds.Tables[0].Rows[fpnl].ItemArray[0].ToString();
                txtstatusname.Text = ds.Tables[0].Rows[fpnl].ItemArray[1].ToString();
            }
            btnimage();
    }
    protected void btnCancel_Click(object sender, EventArgs e)
    {
        try
        {
            string sess = Session["compcode"].ToString();
        }
        catch (Exception ex)
        {
            ScriptManager.RegisterClientScriptBlock(this, typeof(status_master), "abc", "alert('session Expired');window.close();", true);

            return;
        }
        pnew.Value = "0";
        txtstatuscode.Text = "";
        txtstatusname.Text = "";
        hiddenauto.Value = "";
        query.Value = "1";
        chkstatus(FlagStatus);

       getbuttoncheck(formname);
        if(btnSave.Enabled ==true)
            ScriptManager1.SetFocus(btnSave);
        txtstatuscode.Enabled = false;
        txtstatusname.Enabled = false;
       // ScriptManager1.SetFocus(btnNew);
        btnimage();
     }
    protected void btnfirst_Click(object sender, EventArgs e)
    {
        if (Session["compcode"].ToString() == null)
        {
            message = "Session Expired.Please Login Again.";//of " + statusname + " ";
            AspNetMessageBox(message);
            txtstatuscode.Text = "";
            return;
        }
        fpnl = 0;

        DataSet ds = new DataSet();
        ds = executepro;
        query.Value = "1";
        txtstatuscode.Text = ds.Tables[0].Rows[0].ItemArray[0].ToString();
        txtstatusname.Text = ds.Tables[0].Rows[0].ItemArray[1].ToString();
        updateStatus();

        btnfirst.Enabled = false;
        btnprevious.Enabled = false;
        btnnext.Enabled = true;
        btnlast.Enabled = true;
        btnimage();

    }
    protected void btnprevious_Click(object sender, EventArgs e)
    {
        if (Session["compcode"].ToString() == null)
        {
            message = "Session Expired.Please Login Again.";//of " + statusname + " ";
            AspNetMessageBox(message);
            txtstatuscode.Text = "";
            return;
        }
        DataSet ds = new DataSet();
        ds = executepro;

        // fpnl--;
        int count = ds.Tables[0].Rows.Count - 1;
        query.Value = "1";
        fpnl--;

        if (fpnl != -1)
        {
            if (fpnl >= 0 || fpnl <= count)
            {
                txtstatuscode.Text = ds.Tables[0].Rows[fpnl].ItemArray[0].ToString();
                txtstatusname.Text = ds.Tables[0].Rows[fpnl].ItemArray[1].ToString();
                updateStatus();

                btnfirst.Enabled = true;
                btnlast.Enabled = true;
                btnprevious.Enabled = true;
                btnnext.Enabled = true;
            }
            else
            {
                btnnext.Enabled = true;
                btnlast.Enabled = true;
                btnfirst.Enabled = false;
                btnprevious.Enabled = false;

            }
        }
        else
        {
            btnnext.Enabled = true;
            btnlast.Enabled = true;
            btnfirst.Enabled = false;
            btnprevious.Enabled = false;

        }
        if (fpnl == 0)
        {
            btnfirst.Enabled = false;
            btnprevious.Enabled = false;
            btnnext.Enabled = true;
            btnlast.Enabled = true;

        }
        btnimage();
    }
    protected void btnnext_Click(object sender, EventArgs e)
    {
        if (Session["compcode"].ToString() == null)
        {
            message = "Session Expired.Please Login Again.";//of " + statusname + " ";
            AspNetMessageBox(message);
            txtstatuscode.Text = "";
            return;
        }
        DataSet ds = new DataSet();
        ds = executepro;
        int count = ds.Tables[0].Rows.Count - 1;
        fpnl++;

        query.Value = "1";
        if (fpnl != -1 && fpnl >= 0)
        {
            if (fpnl <= count)
            {
                txtstatuscode.Text = ds.Tables[0].Rows[fpnl].ItemArray[0].ToString();
                txtstatusname.Text = ds.Tables[0].Rows[fpnl].ItemArray[1].ToString();
                btnfirst.Enabled = true;
                btnprevious.Enabled = true;
                btnnext.Enabled = true;
                btnlast.Enabled = true;
            }

            else
            {
                btnnext.Enabled = false;
                btnlast.Enabled = false;
                btnfirst.Enabled = true;
                btnprevious.Enabled = true;

            }
        }
        else
        {
            btnnext.Enabled = false;
            btnlast.Enabled = false;
            btnfirst.Enabled = true;
            btnprevious.Enabled = true;

        }
        if (fpnl == count)
        {
            btnnext.Enabled = false;
            btnlast.Enabled = false;
            btnfirst.Enabled = true;
            btnprevious.Enabled = true;

        }
        btnimage();
    }
    protected void btnlast_Click(object sender, EventArgs e)
    {
        if (Session["compcode"].ToString() == null)
        {
            message = "Session Expired.Please Login Again.";//of " + statusname + " ";
            AspNetMessageBox(message);
            txtstatuscode.Text = "";
            return;
        }
        DataSet ds = new DataSet();
        ds = executepro;
        int count = ds.Tables[0].Rows.Count;
        fpnl = count - 1;
        query.Value = "1";

        txtstatuscode.Text = ds.Tables[0].Rows[fpnl].ItemArray[0].ToString();
        txtstatusname.Text = ds.Tables[0].Rows[fpnl].ItemArray[1].ToString();

        updateStatus();

        btnfirst.Enabled = true;
        btnprevious.Enabled = true;
        btnlast.Enabled = false;
        btnnext.Enabled = false;
        btnimage();
    }
    public void btnimage()
    {
        DataSet ds = new DataSet();
        ds.ReadXml(Server.MapPath("XML/button.xml"));
        if (btnNew.Enabled == false)
            btnNew.ImageUrl = ds.Tables[1].Rows[0].ItemArray[0].ToString();
        else
            btnNew.ImageUrl = ds.Tables[0].Rows[0].ItemArray[0].ToString();
        if (btnSave.Enabled == false)
            btnSave.ImageUrl = ds.Tables[1].Rows[0].ItemArray[1].ToString();
        else
            btnSave.ImageUrl = ds.Tables[0].Rows[0].ItemArray[1].ToString();
        if (btnModify.Enabled == false)
            btnModify.ImageUrl = ds.Tables[1].Rows[0].ItemArray[2].ToString();
        else
            btnModify.ImageUrl = ds.Tables[0].Rows[0].ItemArray[2].ToString();
        if (btnQuery.Enabled == false)
            btnQuery.ImageUrl = ds.Tables[1].Rows[0].ItemArray[3].ToString();
        else
            btnQuery.ImageUrl = ds.Tables[0].Rows[0].ItemArray[3].ToString();
        if (btnExecute.Enabled == false)
            btnExecute.ImageUrl = ds.Tables[1].Rows[0].ItemArray[4].ToString();
        else
            btnExecute.ImageUrl = ds.Tables[0].Rows[0].ItemArray[4].ToString();
        if (btnCancel.Enabled == false)
            btnCancel.ImageUrl = ds.Tables[1].Rows[0].ItemArray[5].ToString();
        else
            btnCancel.ImageUrl = ds.Tables[0].Rows[0].ItemArray[5].ToString();
        if (btnfirst.Enabled == false)
            btnfirst.ImageUrl = ds.Tables[1].Rows[0].ItemArray[6].ToString();
        else
            btnfirst.ImageUrl = ds.Tables[0].Rows[0].ItemArray[6].ToString();
        if (btnprevious.Enabled == false)
            btnprevious.ImageUrl = ds.Tables[1].Rows[0].ItemArray[7].ToString();
        else
            btnprevious.ImageUrl = ds.Tables[0].Rows[0].ItemArray[7].ToString();
        if (btnnext.Enabled == false)
            btnnext.ImageUrl = ds.Tables[1].Rows[0].ItemArray[8].ToString();
        else
            btnnext.ImageUrl = ds.Tables[0].Rows[0].ItemArray[8].ToString();
        if (btnlast.Enabled == false)
            btnlast.ImageUrl = ds.Tables[1].Rows[0].ItemArray[9].ToString();
        else
            btnlast.ImageUrl = ds.Tables[0].Rows[0].ItemArray[9].ToString();
        if (btnDelete.Enabled == false)
            btnDelete.ImageUrl = ds.Tables[1].Rows[0].ItemArray[10].ToString();
        else
            btnDelete.ImageUrl = ds.Tables[0].Rows[0].ItemArray[10].ToString();
        if (btnExit.Enabled == false)
            btnExit.ImageUrl = ds.Tables[1].Rows[0].ItemArray[11].ToString();
        else
            btnExit.ImageUrl = ds.Tables[0].Rows[0].ItemArray[11].ToString();
    }
}


